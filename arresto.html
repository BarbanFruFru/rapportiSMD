<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modulo Arresto</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .container {
            max-width: 600px;
            margin-top: 100px; /* Aggiungi un margine superiore per evitare la sovrapposizione */
        }
        .form-group {
            margin-bottom: 20px;
        }
        .logo {
            max-width: 15%;
            height: auto; 
            position: absolute;
            top: 20px;
            left: 20px;
        }
    </style>
</head>
<body>
    <img src="images/2025-02-04_22.44.27-removebg-preview.png" alt="logo smd" class="logo">
    <div class="container">
        <h1 class="text-center">Modulo Arresto</h1>
        <form id="ModuloArresto">
            <div class="form-group">
                <label for="nome">Nome (IGN):</label>
                <input type="text" class="form-control" id="nome" name="nome_ign" required>
            </div>
            <div class="form-group">
                <label for="corpo">Corpo di appartenenza:</label>
                <select class="form-control" id="corpo" name="corpo_appartenza" required>
                    <option value="Esercito">Esercito</option>
                    <option value="Carabinieri">Carabinieri</option>
                </select>
            </div>
            <div class="form-group">
                <label for="grado">Grado:</label>
                <input type="text" class="form-control" id="grado" name="grado" required>
            </div>
            <div class="form-group">
                <label for="carcerato">Carcerato:</label>
                <input type="text" class="form-control" id="carcerato" name="carcerato" required>
            </div>
            <div class="form-group">
                <label for="motivo">Motivo:</label>
                <textarea class="form-control" id="motivo" name="motivo" required></textarea>
            </div>
            <div class="form-group">
                <label for="luogo">Luogo:</label>
                <input type="text" class="form-control" id="luogo" name="luogo" required>
            </div>
            <div class="form-group">
                <label for="data">Data:</label>
                <input type="date" class="form-control" id="data" name="data" required>
            </div>
            <div class="form-group">
                <label for="ora">Ora:</label>
                <input type="time" class="form-control" id="ora" name="ora" required>
            </div>
            <div class="form-group">
                <label for="colleghi">Colleghi presenti:</label>
                <textarea class="form-control" id="colleghi" name="colleghi_presenti" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Invia</button>
        </form>
    </div>

    <script>
    document.getElementById("ModuloArresto").addEventListener("submit", function(event) {
    event.preventDefault();
    
    // Raccogli i dati dal modulo
    let formData = new FormData(this);
    let jsonData = {};
    
    // Crea l'oggetto jsonData dai dati del modulo
    formData.forEach((value, key) => {
        jsonData[key] = value; // Aggiungi ogni campo nel nostro oggetto jsonData
    });

    // Log dei dati che stiamo inviando per il debug
    console.log("Dati del modulo da inviare:", jsonData);

    // Invia i dati tramite fetch al Google Apps Script
    fetch("https://script.google.com/macros/s/AKfycbwFeXUJjkpPCEcskeAcPX4einjgAAJotXqe8CCkBMYk8InJAy57mmzqz0z15b50iw5J/exec", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify(jsonData) // Invia i dati raccolti nel modulo come JSON
    })
    .then(response => response.json())
    .then(data => console.log("Risposta dal server:", data))  // Log della risposta dal server
    .catch(error => console.error("Errore nella richiesta:", error));
});
    </script>
</body>
</html>
